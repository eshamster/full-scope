# TODO リスト

## 機能改善

### ファイル処理
- [ ] **大文字拡張子のサポート**: 現在は小文字拡張子（.jpg, .png等）のみサポート。大文字拡張子（.JPG, .PNG等）も認識するように改善
  - 関連ファイル: `src-tauri/src/lib.rs:56` の `extract_image_files` 関数
  - 対応方法: 拡張子チェックを大文字小文字を区別しないように変更
  - 影響: ドラッグ&ドロップ時の画像ファイル認識精度向上

### セキュリティ
- [ ] **ファイル削除の安全性強化**: 現在はクライアントから渡されたパスを無条件で削除
  - 関連ファイル: `src-tauri/src/lib.rs:98` の `delete_file` 関数
  - 既存コメント: "クライアントに返したパスを記録してそれ以外のファイルは削除しないようにする"
  - 対応方法: ホワイトリスト方式でアプリが管理する画像パスのみ削除許可

## テスト関連
- [ ] **E2Eテストの実装**: Playwright を使用したフルアプリケーションテスト
- [x] **コンポーネントテストの実装**: Vitest Browser Mode でのSvelteコンポーネントテスト
- [ ] **Tauri統合テストの実装**: `tauri::test` を使用したコマンドテスト

## パフォーマンス
- [ ] **大量画像ファイルの処理最適化**: 現在は全ファイルを一度にメモリに読み込み
- [ ] **画像プリロードの最適化**: 必要な画像のみを先読み
- [ ] **タグキャッシュサイズ制限実装**: 大量のディレクトリを訪問した際のメモリ使用量制限
  - 関連ファイル: `src/routes/viewer/tag-controller.svelte.ts:121-127`
  - 対応方法: LRU (Least Recently Used) キャッシュまたはTTLベースの自動削除機能を実装
  - 想定実装: 最大キャッシュエントリ数100ディレクトリ、TTL30分、アクセス頻度に基づくLRU削除

## UI/UX改善
- [ ] **キーボードショートカットのカスタマイズ**: ユーザー設定でキー割り当て変更
- [ ] **画像メタデータ表示**: EXIF情報、ファイルサイズ等の表示

## 新機能実装
- [x] **タグ付け機能**: 画像にタグを付けて分類管理
- [x] **タグでの絞り込み**: タグによる画像の絞り込み表示
- [ ] **ファイル操作の拡張**: コピー・移動機能の実装
- [ ] **画像拡大・縮小**: ズームイン・ズームアウト機能
- [ ] **画像回転**: 90度単位での画像回転機能
- [x] **ファイル情報表示機能**: トグル式でファイル情報とタグ情報を表示
- [ ] **画像原寸表示**: 画像を原寸サイズで表示する機能
- [ ] **ファイル名での絞り込み**: ファイル名による検索・絞り込み機能

## アプリケーション改善
- [ ] **親ウィンドウを閉じたらviewerウィンドウも閉じる**: ウィンドウ連動機能
- [ ] **ドロップした中に画像ファイルがない場合はviewerを開かずにメッセージを出す**: エラーハンドリング改善
- [ ] **viewerを開いた際にフォーカスする**: UX向上
- [x] **webp対応**: WebP形式の画像ファイルサポート
- [ ] **外部で画像が移動・削除されて読めなくなった場合のエラーハンドリング**: ファイル状態監視
- [ ] **Alt+Shift+αでウィンドウを切り替えた時にAlt, Shiftの判定が残りっぱなしになる**: キーボード状態管理の修正

## 開発・デプロイメント
- [ ] **CI**: 継続的インテグレーションの設定
- [ ] **リリース on GitHub**: GitHub Releasesでのリリース自動化
- [ ] **コマンドのパース**: キーボードショートカットの柔軟なパース機能
- [ ] **デフォルトで入っていた余計なiconを消す**: 不要なアイコンファイルの削除

## 技術的負債
- [ ] **エラーハンドリングの統一**: 現在は`unwrap()`が多用されている箇所の改善
- [ ] **型安全性の向上**: より厳密な型定義とバリデーション
- [ ] **ログ出力の整備**: 開発・デバッグ用のログシステム実装